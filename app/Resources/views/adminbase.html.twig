<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
    <head>
        <meta charset="utf-8">
        <title>{% block title %}Admin Dashboard{% endblock %}</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport">
        <meta content="Turfe.net CMS" name="description">
        <meta content="Eduardo Umpierre" name="author">

        {% block stylesheets %}
            <!-- BEGIN GLOBAL MANDATORY STYLES -->
            <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&amp;subset=all" rel="stylesheet"
                  type="text/css">
            <link href="{{ asset('assets/admin/style.min.css') }}" rel="stylesheet" type="text/css">
            <!-- END THEME LAYOUT STYLES -->
            <link rel="shortcut icon" href="favicon.ico">
        {% endblock %}

        <!-- <style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style> -->
    </head>
    <!-- END HEAD -->

    <body class="page-sidebar-closed-hide-logo page-content-white page-header-fixed">
        <div class="page-wrapper">
            <!-- HEADER -->
            <div class="page-header navbar navbar-fixed-top">
                <div class="page-header-inner">
                    <div class="page-logo">
                        <a href="{{ path('admin_default_index') }}">
                            <img src="{{ asset('assets/admin/img/logo-turfe.png') }}" alt="logo" class="logo-default"
                                 width="119">
                        </a>

                        <div class="menu-toggler sidebar-toggler"><span></span></div>
                    </div>

                    <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
                       data-target=".navbar-collapse"><span></span></a>

                    <div class="top-menu">
                        <ul class="nav navbar-nav pull-right">
                            <li class="dropdown dropdown-user">
                                <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
                                   data-close-others="true">
                                    {#<img alt="" class="img-circle" src="{{ asset('assets/admin/layout/img/avatar3_small.jpg') }}">#}
                                    <span class="username username-hide-on-mobile">Olá</span>
                                    <i class="fa fa-angle-down"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-default">
                                    <li>
                                        <a href="#"><i class="icon-user"></i> My Profile</a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a href="/admin/logout"><i class="icon-key"></i> Log Out</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>

            <div class="page-container">
                <!-- SIDEBAR -->
                <div class="page-sidebar-wrapper">
                    <div class="page-sidebar navbar-collapse collapse">
                        <ul class="page-sidebar-menu  page-header-fixed" data-keep-expanded="false" data-auto-scroll="true"
                            data-slide-speed="200" data-height="880">
                            <li class="sidebar-toggler-wrapper hide">
                                <div class="sidebar-toggler">
                                    <span></span>
                                </div>
                            </li>
                            <li class="nav-item">
                                <a href="{{ path('book_index') }}" class="nav-link">
                                    <i class="icon-diamond"></i>
                                    <span class="title">Livros</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="{{ path('author_index') }}" class="nav-link">
                                    <i class="icon-diamond"></i>
                                    <span class="title">Autores</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- CONTENT -->
                <div class="page-content-wrapper">
                    <div class="page-content">
                        <div class="page-bar">
                            <ul class="page-breadcrumb">
                                <li>
                                    <a href="{{ path('admin_default_index') }}">Home</a>
                                    <i class="fa fa-circle"></i>
                                </li>
                                <li>
                                    <span>Dashboard</span>
                                </li>
                            </ul>
                        </div>

                        <h1 class="page-title">
                            {% block pageTitle %}
                                Admin Dashboard
                                <small>statistics, charts, recent events and reports</small>
                            {% endblock %}
                        </h1>

                        {% block body %}{% endblock %}
                    </div>
                </div>
            </div>

            <div class="scroll-to-top" style="display: none;">
                <i class="icon-arrow-up"></i>
            </div>
        </div>

        {% block javascripts %}
            <!--[if lt IE 9]>
            <script src="{{ asset('assets/admin/global/plugins/respond.min.js') }}"></script>
            <script src="{{ asset('assets/admin/global/plugins/excanvas.min.js') }}"></script>
            <script src="{{ asset('assets/admin/global/plugins/ie8.fix.min.js') }}"></script>
            <![endif]-->

            <script src="{{ asset('assets/admin/script.min.js') }}" type="text/javascript"></script>
        {% endblock %}

        <script>
            $(document).ready(function() {
                $('.js-datepicker').datepicker({
                    format: 'yyyy-mm-dd'
                });
            });
        </script>

        <script type="text/javascript">
            var _class = 'success';

            {% for flash_message in app.session.flashBag.get('message-class') %}
            _class = '{{ flash_message }}';
            {% endfor %}

            {% for flash_message in app.session.flashBag.get('message') %}
            $.bootstrapGrowl('{{ flash_message }}', {
                ele: 'body', // which element to append to
                type: _class, // (null, 'info', 'danger', 'success')
                offset: {from: 'bottom', amount: 20}, // 'top', or 'bottom'
                align: 'right', // ('left', 'right', or 'center')
                width: 250, // (integer, or 'auto')
                delay: 4000, // Time while the message will be displayed. It's not equivalent to the *demo* timeOut!
                allow_dismiss: true, // If true then will display a cross to close the popup.
                stackup_spacing: 10 // spacing between consecutively stacked growls.
            });
            {% endfor %}

            $(".confirm").on("click", function (e) {
                var _this = $(this);
                var id = _this.data("id");
                var module = _this.data("module");

                swal({
                    title: "Você tem certeza?",
                    text: "",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonClass: "btn-danger",
                    confirmButtonText: "Sim, por favor",
                    cancelButtonText: "Cancelar",
                    closeOnConfirm: false,
                    closeOnCancel: true
                },
                function (isConfirm) {
                    if (isConfirm) {
                        $.get("/admin/" + module + "/excluir/" + id)
                                .done(function (data) {
                                    if (data == 1) {
                                        swal("Sucesso!", "O item foi excluído com sucesso.", "success");

                                        _this.closest("tr").hide(300).delay(300).remove();
                                    }
                                })
                                .fail(function () {
                                    swal("Erro!", "O item não foi excluído. Tente novamente.", "error");
                                });
                    } else {
                        e.preventDefault();
                    }
                });
            });
        </script>
    </body>
</html>